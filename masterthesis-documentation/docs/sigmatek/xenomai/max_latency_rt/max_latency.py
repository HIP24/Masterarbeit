import matplotlib.pyplot as plt
import numpy as np

# Data points
x = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440,441,442,443,444,445,446,447,448,449,450,451,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480,481,482,483,484,485,486,487,488,489,490,491,492,493,494,495,496,497,498,499,500,501,502,503,504,505,506,507,508,509,510,511,512,513,514,515,516,517,518,519,520,521,522,523,524,525,526,527,528,529,530,531,532,533,534,535,536,537,538,539,540,541,542,543,544,545,546,547,548,549,550,551,552,553,554,555,556,557,558,559,560,561,562,563,564,565,566,567,568,569,570,571,572,573,574,575,576,577,578,579,580,581,582,583,584,585,586,587,588,589,590,591,592,593,594,595,596,597,598,599
]

y = [11.972,15.173,9.350,10.562,21.768,18.094,16.299,12.289,15.231,17.875,10.706,13.902,9.547,21.914,17.139,22.451,9.784,10.293,10.389,30.106,10.509,11.586,16.948,10.908,9.859,8.760,11.177,24.508,11.831,14.254,9.453,19.050,14.081,8.269,22.796,19.862,15.323,8.990,9.531,18.530,18.994,26.783,29.148,29.070,17.154,9.779,15.195,10.523,19.129,26.927,23.847,19.289,10.075,11.446,15.162,13.294,26.490,29.735,18.274,17.875,10.645,17.027,11.791,16.768,31.337,27.478,21.079,11.522,16.657,23.533,15.647,8.005,30.659,24.129,19.882,27.983,17.923,11.766,10.746,10.661,29.544,20.497,16.992,9.633,16.915,15.532,9.940,13.297,28.903,27.435,16.549,9.894,14.166,13.458,11.621,10.623,14.181,28.896,17.176,12.372,15.607,11.018,15.818,17.158,9.756,30.534,20.607,19.411,16.301,9.411,18.342,12.261,12.621,9.259,30.384,20.396,30.469,15.003,11.741,15.258,17.032,13.740,30.681,23.400,23.260,17.089,11.583,13.921,13.514,15.845,11.637,17.051,30.118,18.983,17.174,11.075,11.748,18.458,19.158,10.015,30.420,26.811,22.305,21.971,18.635,23.781,13.444,9.138,12.447,21.013,26.584,22.768,19.469,14.462,15.978,14.399,16.126,17.890,17.466,30.127,22.312,18.942,9.997,20.304,14.808,25.851,16.217,18.937,10.439,31.238,19.634,17.976,19.403,18.606,13.146,12.160,19.845,12.350,15.338,26.393,19.944,21.771,12.727,17.149,13.600,17.890,11.999,17.247,9.983,29.765,28.287,21.162,12.547,14.864,13.189,12.256,26.241,10.401,10.435,26.904,23.784,18.484,10.545,11.501,23.253,16.334,13.202,15.394,30.333,17.260,28.325,19.612,16.130,10.169,16.130,13.693,17.283,13.302,15.995,16.036,30.427,30.932,17.216,10.297,10.359,13.945,10.584,19.836,27.524,11.372,16.854,16.840,28.187,18.519,19.696,15.407,25.954,13.214,19.351,16.755,20.155,16.978,17.687,29.105,20.106,18.756,14.428,13.501,14.741,19.940,15.494,17.570,21.702,29.289,29.666,22.983,15.660,11.262,21.749,25.485,12.516,14.265,17.823,19.914,10.856,16.531,30.261,19.284,13.064,11.070,15.409,17.254,11.879,15.030,18.802,18.708,9.618,30.537,28.382,19.906,13.292,29.727,16.591,19.049,15.918,17.068,14.237,10.193,15.750,19.138,28.064,26.472,17.309,10.188,13.831,11.422,16.168,10.216,13.031,18.226,16.137,13.110,13.450,16.016,28.961,17.084,13.632,14.419,17.900,9.395,20.702,16.406,15.783,9.307,11.887,13.592,29.488,27.669,19.042,10.647,18.044,16.630,10.345,8.526,14.929,14.735,11.333,10.379,18.003,30.304,26.424,27.300,23.791,15.739,17.952,12.399,8.706,9.912,19.168,13.680,16.631,17.193,18.109,11.523,27.559,28.714,22.232,13.775,14.648,16.754,18.559,13.974,10.019,16.022,15.962,14.569,25.327,15.915,17.926,29.817,24.795,19.474,10.435,30.178,15.019,17.917,9.102,15.249,15.539,13.081,10.141,13.651,12.292,28.977,30.386,23.712,16.890,29.269,16.495,18.331,14.287,9.223,18.609,14.168,13.591,12.602,17.727,12.801,32.216,29.811,24.182,17.720,14.368,17.287,9.760,16.175,11.826,13.508,15.229,14.812,12.791,23.042,14.763,31.862,30.591,27.655,21.242,18.687,12.357,17.297,10.633,10.213,12.905,15.497,13.656,16.138,25.580,30.056,17.173,10.665,24.874,29.314,23.987,15.335,21.132,18.950,21.643,21.182,13.123,17.357,25.090,29.535,17.324,18.071,21.083,17.368,13.417,10.305,30.121,18.154,20.770,14.477,10.283,10.865,16.947,14.239,15.484,17.061,9.864,19.183,22.134,10.018,19.542,22.259,17.048,17.596,29.570,20.715,23.995,19.711,11.111,26.501,25.689,11.168,18.241,24.519,20.347,12.894,17.002,11.233,26.726,11.442,23.533,13.506,27.533,29.268,28.775,18.891,16.818,19.285,27.897,21.223,10.944,17.896,12.022,9.584,15.851,12.952,15.304,19.629,10.271,10.582,25.709,28.041,28.420,29.635,26.893,17.584,13.142,25.122,17.479,30.781,28.808,13.804,10.020,12.693,12.146,16.862,14.481,16.069,10.017,12.621,20.404,17.447,30.105,29.285,29.076,25.933,15.812,16.187,13.770,11.150,14.749,9.809,19.269,19.844,10.881,11.636,17.126,18.589,11.242,15.187,14.573,17.688,14.070,17.221,12.426,28.477,22.918,24.137,16.875,11.479,17.443,16.876,26.809,16.397,16.056,16.579,10.497,16.043,16.371,11.116,11.777,16.060,11.007,16.210,14.544,18.437,28.399,29.053,20.821,23.589,19.436,16.798,15.797,15.619,17.250,18.492,12.823,9.337,13.033,12.503,17.559,17.124,15.092,18.222,9.393,13.902,10.337,17.037,10.837,13.500,29.230,29.725,24.876,20.601,16.358,14.716,20.208,18.319,23.780,10.808,10.854,9.504,12.295,16.715,13.642,20.507,11.645
]

# Calculate statistics
max_y = np.max(y)
min_y = np.min(y)
std_y = np.std(y)
average_y = np.mean(y) 

# Print the statistics
print(f"Max: {max_y}")
print(f"Min: {min_y}")
print(f"Standard Deviation: {round(std_y, 2)}")
print(f"Average: {round(average_y, 2)}") 

# Create the plot
plt.figure(figsize=(10, 6))
plt.plot(x, y,'-', color='blue')

# Set the title and labels
plt.title('Latency of Operating System')
plt.xlabel('Time [s]')
plt.ylabel('Latency [Âµs]')

# Set the x and y axis limits
plt.xlim([0, 600])
plt.ylim([0, 40])

# Save the plot to a file
plt.savefig("test_max_latency.png")
#plt.savefig("../../../../../img/max_latency_default.png")

# Print a success message
print("The plot was successfully saved to test_max_latency.png")

# Write the statistics to a file
with open('test_max_latency_statistics.txt', 'w') as f:
    f.write(f"Average latency: {round(average_y, 2)}us\n") 
    f.write(f"Max latency: {max_y}us\n")
    f.write(f"Min latency: {min_y}us\n")
    f.write(f"Standard Deviation: {round(std_y, 2)}us\n")
     
    
# Print a success message
print("The statistics were successfully written to test_max_latency_statistics.txt")



